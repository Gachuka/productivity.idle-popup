import './UserCurrentStat.scss'

const expPerLevel = [0,300,600,1200,2400,4800,9600,19200,384000,768000,1536000,3072000,6144000,12288000,24576000,49152000,98304000,196608000,393216000,786432000,1572864000,3145728000,6291456000,12582912000,25165824000,50331648000,100663296000,201326592000,402653184000,805306368000,1610612736000,3221225472000,6442450944000,12884901888000,25769803776000,51539607552000,103079215104000,206158430208000,412316860416000,824633720832000,1649267441664000,3298534883328000,6597069766656000,13194139533312000,26388279066624000,52776558133248000,105553116266496000,211106232532992000,422212465065984000,844424930131968000,1688849860263936000,3377699720527872000,6755399441055744000,13510798882111488000,27021597764222976000,54043195528445950000,108086391056891900000,216172782113783800000,432345564227567600000,864691128455135200000,1.7293822569102705e+21,3.458764513820541e+21,6.917529027641082e+21,1.3835058055282164e+22,2.7670116110564327e+22,5.5340232221128655e+22,1.1068046444225731e+23,2.2136092888451462e+23,4.4272185776902924e+23,8.854437155380585e+23,1.770887431076117e+24,3.541774862152234e+24,7.083549724304468e+24,1.4167099448608936e+25,2.833419889721787e+25,5.666839779443574e+25,1.1333679558887149e+26,2.2667359117774297e+26,4.5334718235548594e+26,9.066943647109719e+26,1.8133887294219438e+27,3.6267774588438875e+27,7.253554917687775e+27,1.450710983537555e+28,2.90142196707511e+28,5.80284393415022e+28,1.160568786830044e+29,2.321137573660088e+29,4.642275147320176e+29,9.284550294640352e+29,1.8569100589280704e+30,3.713820117856141e+30,7.427640235712282e+30,1.4855280471424563e+31,2.9710560942849127e+31,5.942112188569825e+31,1.188422437713965e+32,2.37684487542793e+32,4.75368975085586e+32,9.50737950171172e+32,1.901475900342344e+33]

function UserCurrentStat({chrCountDisplay}) {

  
  
  const checkLevel = (currentExp) => {
    for (let i = 0; i < expPerLevel.length; i++) {
      if (currentExp < expPerLevel[i]) {
        return i
      }
    }
  }

  let currentLevel = checkLevel(chrCountDisplay)
  
  let percent = ((chrCountDisplay-expPerLevel[checkLevel(chrCountDisplay)-1])/expPerLevel[checkLevel(chrCountDisplay)])*100

  const progressStyle = {
    width: `${percent}%`,
  }

  return (
    <div className='stat'>
      <div className='stat__container'>
        <div className='stat__user user'>
          <div className='user__container'>
            <div className='user__info'>
              <div className='user__title'>Novice Typer</div>
              <div className='user__level'>lv.{currentLevel}</div>
            </div>
            <div className='user__expbar expbar'>
              <div className='expbar__bar'></div>
              <div className='expbar__progress' style={progressStyle}></div>
            </div>
          </div>
          <div className='user__count count'>
            <div className='count__title'>Count</div>
            <div className='count__number'>{chrCountDisplay}</div>
          </div>
        </div>
      </div>
    </div>
  )
}

export default UserCurrentStat;